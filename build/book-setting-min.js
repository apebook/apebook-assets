KISSY.add("apebook/book-setting",["kg/auth/2.0.9/","kg/auth/2.0.9/plugin/msgs/","io","kg/auth/2.0.9/plugin/msgs/style.css","node"],function(e,n,r,t){var u,o,i,a=n("kg/auth/2.0.9/"),s=n("kg/auth/2.0.9/plugin/msgs/"),g=n("io"),p=(n("kg/auth/2.0.9/plugin/msgs/style.css"),n("node"));u=function(e){var n=a,r=s,t=g;return e=function(){var e=new n("#J_Auth");e.plug(new r),e.register("exist",function(e,n,r){var u=this;return t.getJSON("/api/book/exist",{uri:e}).then(function(e){var n=e[0];n.exist?r.reject(u):r.resolve(u)}),r.promise}),e.register("exist-name",function(e,n,r){var u=this;return t.getJSON("/api/book/exist-name",{name:e}).then(function(e){var n=e[0];n.exist?r.reject(u):r.resolve(u)}),r.promise}),e.render()}}(),o=function(n){var r=p,t=r.all;return n=function(){var n=t("#J_UploaderBtn");return n.length?void e.use("kg/uploader/3.0.5/index,kg/uploader/3.0.5/themes/singleImageUploader/index",function(e,n,r){var u="kg/uploader/3.0.5/plugins/auth/auth,kg/uploader/3.0.5/plugins/urlsInput/urlsInput,kg/uploader/3.0.5/plugins/proBars/proBars,kg/uploader/3.0.5/plugins/filedrop/filedrop,kg/uploader/3.0.5/plugins/preview/preview";e.use(u,function(e,u,o,i,a,s){var g=new n("#J_UploaderBtn",{action:"/api/book/cover",data:{id:t(".J_BookId").val()}});g.theme(new r({queueTarget:"#J_UploaderQueue"})),g.plug(new u({maxSize:3e3})).plug(new i).plug(new s),g.restore()})}):!1}}(),i=function(e){var n=u;n();var r=o;return r(),e}(),t.exports=i});