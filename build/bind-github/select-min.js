KISSY.add("apebook/bind-github/select",["node","io"],function(t,a,e,o){var n=a("node").all,r=a("io");o.exports=function(){function t(t,a){e.html(""),o.show();var n=e.attr("data-repo");r.getJSON("/api/github/repos",{userName:t,isOrg:a}).then(function(t){var a=t[0];if(a.success){a=a.result,o.hide();var r="";a.forEach(function(t){var a="";n===t.name&&(a="selected"),r+='<option value="'+t.name+'" '+a+">"+t.name+"</option>"}),e.html(r)}else alert(a.msg)})}var a=n(".J_Orgs");if(!a.length)return!1;var e=n(".J_Repos"),o=n(".J_ReposLoadingTip");r.getJSON("/api/github/orgs").then(function(t){var e=t[0];if(e.success){var o=a.attr("data-org"),n=a.attr("data-user");e=e.result;var r='<option value="'+n+'" '+(o===n&&"selected"||"")+">"+n+"</option>";e.length>0&&(e.forEach(function(t){var a="";o===t.login&&(a="selected"),r+='<option value="'+t.login+'" '+a+">"+t.login+"</option>"}),a.html(r))}}),a.on("change",function(){var e=a.val();t(e,!0)}),t(e.attr("data-name"),e.attr("data-isOrg")||!1)}});