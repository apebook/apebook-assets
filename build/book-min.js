KISSY.add("apebook/gitbook",["kg/auth/2.0.9/","kg/auth/2.0.9/plugin/msgs/","io","kg/auth/2.0.9/plugin/msgs/style.css","node"],function(e,n){var r,u,t,i=n("kg/auth/2.0.9/"),o=n("kg/auth/2.0.9/plugin/msgs/"),a=n("io"),s=(n("kg/auth/2.0.9/plugin/msgs/style.css"),n("node"));r=function(e){var n=i,r=o,u=a;return e=function(){var e=new n("#J_Auth");e.plug(new r),e.register("exist",function(e,n,r){var t=this;return u.getJSON("/api/book/exist",{uri:e}).then(function(e){var n=e[0];n.exist?r.reject(t):r.resolve(t)}),r.promise}),e.register("exist-name",function(e,n,r){var t=this;return u.getJSON("/api/book/exist-name",{name:e}).then(function(e){var n=e[0];n.exist?r.reject(t):r.resolve(t)}),r.promise}),e.render()}}(),u=function(n){var r=s,u=r.all;return n=function(){var n=u("#J_UploaderBtn");return n.length?void e.use("kg/uploader/3.0.5/index,kg/uploader/3.0.5/themes/singleImageUploader/index",function(e,n,r){var t="kg/uploader/3.0.5/plugins/auth/auth,kg/uploader/3.0.5/plugins/urlsInput/urlsInput,kg/uploader/3.0.5/plugins/proBars/proBars,kg/uploader/3.0.5/plugins/filedrop/filedrop,kg/uploader/3.0.5/plugins/preview/preview";e.use(t,function(e,t,i,o,a,s){var g=new n("#J_UploaderBtn",{action:"/api/book/cover",data:{id:u(".J_BookId").val()}});g.theme(new r({queueTarget:"#J_UploaderQueue"})),g.plug(new t({maxSize:3e3})).plug(new o).plug(new s),g.restore()})}):!1}}(),t=function(e){var n=r;n();var t=u;return t(),e}()});